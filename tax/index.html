<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 Tax Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- SIDEBAR -->

    <!-- DISCLAIMER OVERLAY -->
    <div id="disclaimer-overlay" class="overlay">
        <div class="overlay-content">
            <div class="lang-switch">
                <button class="btn-lang active" onclick="setLang('en')">English</button>
                <button class="btn-lang" onclick="setLang('cn')">ä¸­æ–‡</button>
            </div>

            <div id="text-en" class="disclaimer-text">
                <h2>Disclaimer & User Agreement</h2>
                <div class="scroll-area">
                    <p><strong>This application is provided for informational and educational purposes only.</strong> It
                        is not a substitute for professional tax, legal, or accounting advice.</p>
                    <p>The tax calculations, forms (including but not limited to IRS Form 1040), and information
                        generated by this app are intended to assist you in understanding and preparing your own tax
                        documents. They do not constitute official tax filings, and this app does not file taxes on your
                        behalf.</p>
                    <p>For your actual federal or state tax return, you should consult a licensed professional
                        accountant or tax advisor.</p>

                    <h3>No Responsibility or Liability</h3>
                    <p>The developers of this app assume no responsibility or liability for any errors, omissions, tax
                        outcomes, penalties, interest, or damages resulting from the use of this app.</p>

                    <h3>Privacy Notice</h3>
                    <p>This app does not require your name, Social Security Number (SSN), or other personally
                        identifiable information. All data you enter remains entirely on your device. No data is
                        transmitted, uploaded, stored, or collected by us or any third party.</p>

                    <p>By tapping â€œI Agree & Continueâ€, you acknowledge that you have read, understood, and agreed to
                        the terms above.</p>
                </div>
                <div class="actions">
                    <button class="btn btn-secondary" onclick="disagree()">Do Not Agree</button>
                    <button class="btn btn-primary" onclick="agree()">I Agree & Continue</button>
                </div>
            </div>

            <div id="text-cn" class="disclaimer-text" style="display:none;">
                <h2>å…è´£å£°æ˜ä¸ç”¨æˆ·ç¡®è®¤</h2>
                <div class="scroll-area">
                    <p><strong>æœ¬åº”ç”¨ä»…ç”¨äºä¿¡æ¯å‚è€ƒå’Œæ•™è‚²ç›®çš„ï¼Œä¸æ„æˆä»»ä½•å½¢å¼çš„ç¨åŠ¡ã€æ³•å¾‹æˆ–ä¼šè®¡ä¸“ä¸šæ„è§ã€‚</strong></p>
                    <p>æœ¬åº”ç”¨æ‰€æä¾›çš„ç¨åŠ¡è®¡ç®—ã€è¡¨æ ¼ï¼ˆåŒ…æ‹¬ä½†ä¸é™äº IRS 1040 è¡¨ï¼‰åŠç›¸å…³ä¿¡æ¯ï¼Œä»…ç”¨äºååŠ©æ‚¨ç†è§£å¹¶è‡ªè¡Œå¡«å†™æŠ¥ç¨æ–‡ä»¶ã€‚æœ¬åº”ç”¨ä¸ä»£è¡¨å®˜æ–¹æŠ¥ç¨ç³»ç»Ÿï¼Œä¹Ÿä¸ä¼šä»£æ‚¨æäº¤ä»»ä½•ç¨åŠ¡ç”³æŠ¥ã€‚</p>
                    <p>å¦‚éœ€æ­£å¼è¿›è¡Œè”é‚¦æˆ–å·ç¨åŠ¡ç”³æŠ¥ï¼Œè¯·å’¨è¯¢æŒè¯çš„ä¸“ä¸šä¼šè®¡å¸ˆæˆ–ç¨åŠ¡é¡¾é—®ã€‚</p>

                    <h3>è´£ä»»å£°æ˜</h3>
                    <p>å¯¹äºå› ä½¿ç”¨æœ¬åº”ç”¨è€Œäº§ç”Ÿçš„ä»»ä½•é”™è¯¯ã€é—æ¼ã€ç¨åŠ¡ç»“æœã€ç½šæ¬¾ã€åˆ©æ¯æˆ–å…¶ä»–æŸå¤±ï¼Œæœ¬åº”ç”¨å¼€å‘è€…ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»æˆ–æ³•å¾‹ä¹‰åŠ¡ã€‚</p>

                    <h3>éšç§è¯´æ˜</h3>
                    <p>æœ¬åº”ç”¨ä¸è¦æ±‚æ‚¨æä¾›å§“åã€ç¤¾ä¼šå®‰å…¨å·ç ï¼ˆSSNï¼‰æˆ–å…¶ä»–å¯è¯†åˆ«ä¸ªäººèº«ä»½çš„ä¿¡æ¯ã€‚æ‚¨è¾“å…¥çš„æ‰€æœ‰æ•°æ®ä»…ä¿å­˜åœ¨æ‚¨çš„è®¾å¤‡æœ¬åœ°ã€‚æˆ‘ä»¬ä¸ä¼šæ”¶é›†ã€å­˜å‚¨ã€ä¸Šä¼ æˆ–å…±äº«æ‚¨çš„ä»»ä½•ä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šå‘ä»»ä½•ç¬¬ä¸‰æ–¹ä¼ è¾“æ•°æ®ã€‚</p>

                    <p>ç‚¹å‡» â€œåŒæ„å¹¶ç»§ç»­â€ å³è¡¨ç¤ºæ‚¨å·²é˜…è¯»ã€ç†è§£å¹¶åŒæ„ä¸Šè¿°å†…å®¹ã€‚</p>
                </div>
                <div class="actions">
                    <button class="btn btn-secondary" onclick="disagree()">ä¸åŒæ„</button>
                    <button class="btn btn-primary" onclick="agree()">åŒæ„å¹¶ç»§ç»­</button>
                </div>
            </div>
        </div>
    </div>

    <!-- BLOCKED VIEW (If they disagree) -->
    <div id="blocked-view" class="overlay" style="display:none; background: #000;">
        <div style="color:white; text-align:center;">
            <h2>Access Denied</h2>
            <p>You must agree to the terms to use this application.</p>
            <button class="btn btn-ghost" style="color:white; border:1px solid white; margin-top:20px;"
                onclick="resetApp()">Back</button>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main-content">

        <!-- DASHBOARD VIEW -->
        <div id="dashboard" class="view-section">
            <div class="header">
                <h1>Welcome Back</h1>
                <p>Letâ€™s help you get the maximum refund possible. What would you like to work on today? If you need a form that isnâ€™t listed below, please contact us and weâ€™ll be happy to add it.</p>
                <div style="margin-top: 15px;">
                    <label style="font-size: 0.9rem; font-weight: 500;">Filing Status:</label>
                    <select id="filing-status-select"
                        style="padding: 5px; border-radius: 4px; border: 1px solid #ccc; margin-left: 10px;">
                        <option value="single">Single</option>
                        <option value="mfj">Married Filing Jointly</option>
                        <option value="mfs">Married Filing Separately</option>
                        <option value="hoh">Head of Household</option>
                        <option value="qw">Qualifying Surviving Spouse</option>
                    </select>
                </div>
            </div>

            <h2 style="margin-bottom: 20px;">Income</h2>
            <div class="tile-grid">
                <!-- W-2 Tile -->
                <div class="tile" onclick="openW2()">
                    <div>
                        <div class="tile-icon">ğŸ“„</div>
                        <h3>Wages (W-2)</h3>
                        <p>Salary, bonuses, and tips.</p>
                        <div id="w2-list" style="margin-top: 10px; font-size: 0.85rem; color: #495057;">
                            <!-- Summaries go here -->
                        </div>
                    </div>
                    <div class="tile-action" id="dash-wages-total">Add W-2</div>
                </div>

                <!-- 1099-INT Tile -->
                <div class="tile" onclick="openInt()">
                    <div>
                        <div class="tile-icon">ğŸ¦</div>
                        <h3>Interest (1099-INT)</h3>
                        <p>Bank interest and CDs.</p>
                        <div id="int-list" style="margin-top: 10px; font-size: 0.85rem; color: #495057;"></div>
                    </div>
                    <div class="tile-action" id="dash-int-total">Add Interest</div>
                </div>

                <!-- 1099-DIV Tile -->
                <div class="tile" onclick="openDiv()">
                    <div>
                        <div class="tile-icon">ğŸ“ˆ</div>
                        <h3>Dividends (1099-DIV)</h3>
                        <p>Stock dividends and distributions.</p>
                        <div id="div-list" style="margin-top: 10px; font-size: 0.85rem; color: #495057;"></div>
                    </div>
                    <div class="tile-action" id="dash-div-total">Add Dividends</div>
                </div>



                <!-- Schedule C Tile -->
                <div class="tile" onclick="openSchC()">
                    <div>
                        <div class="tile-icon">ğŸ’¼</div>
                        <h3>Business (Sch. C)</h3>
                        <p>Self-employment income & expenses.</p>
                        <div id="schc-list" style="margin-top: 10px; font-size: 0.85rem; color: #495057;"></div>
                    </div>
                    <div class="tile-action" id="dash-schc-total">Add Business</div>
                </div>

                <!-- Schedule D Tile -->
                <div class="tile" onclick="openSchD()">
                    <div>
                        <div class="tile-icon">ğŸ·ï¸</div>
                        <h3>Capital Gains (Sch. D & 8949)</h3>
                        <p>Stock sales and asset gains/losses.</p>
                        <div id="schd-list" style="margin-top: 10px; font-size: 0.85rem; color: #495057;"></div>
                    </div>
                    <div class="tile-action" id="dash-schd-total">Add Asset Sale</div>
                </div>

                <!-- Schedule E Tile -->
                <div class="tile" onclick="openSchE()">
                    <div>
                        <div class="tile-icon">ğŸ </div>
                        <h3>Rentals & Royalties (Sch. E)</h3>
                        <p>Rental properties and royalty income.</p>
                        <div id="sche-list" style="margin-top: 10px; font-size: 0.85rem; color: #495057;"></div>
                    </div>
                    <div class="tile-action" id="dash-sche-total">Add Rental</div>
                </div>

                <!-- 1099-MISC Tile -->
                <div class="tile" onclick="openMisc()">
                    <div>
                        <div class="tile-icon">ğŸ“</div>
                        <h3>Other Income (1099-MISC)</h3>
                        <p>Rents, Royalties, Other Income.</p>
                        <div id="misc-list" style="margin-top: 10px; font-size: 0.85rem; color: #495057;"></div>
                    </div>
                    <div class="tile-action" id="dash-misc-total">Add 1099-MISC</div>
                </div>

                <!-- 1099-R Tile -->
                <div class="tile" onclick="openR()">
                    <div>
                        <div class="tile-icon">ğŸ‘´</div>
                        <h3>Retirement (1099-R)</h3>
                        <p>Pensions, Annuities, IRAs.</p>
                        <div id="r-list" style="margin-top: 10px; font-size: 0.85rem; color: #495057;"></div>
                    </div>
                    <div class="tile-action" id="dash-r-total">Add 1099-R</div>
                </div>

                <!-- SSA-1099 Tile -->
                <div class="tile" onclick="window.TaxCore.Nav.openModal('modal-ssa1099')">
                    <div>
                        <div class="tile-icon">ğŸ›ï¸</div>
                        <h3>SSA-1099</h3>
                        <p>Social Security Benefits from SSA.</p>
                        <div id="ssa-list" style="margin-top: 10px; font-size: 0.85rem; color: #495057;"></div>
                    </div>
                    <div class="tile-action" id="dash-ssa-total">Add SSA-1099</div>
                </div>
            </div>

            <h2 style="margin-bottom: 20px;">Deductions & Credits</h2>
            <div class="tile-grid">
                <!-- Dependents Tile -->
                <div class="tile" onclick="openDependents()">
                    <div>
                        <div class="tile-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                        <h3>Dependents</h3>
                        <p>Qualifying children and other dependents.</p>
                    </div>
                    <div class="tile-action" id="dash-dependents-total">Add Dependents</div>
                </div>

                <!-- Standard/Itemized Tile -->
                <div class="tile" onclick="openReview()">
                    <div>
                        <div class="tile-icon">ğŸ›¡ï¸</div>
                        <h3>Deductions</h3>
                        <p>Standard vs. Itemized analysis.</p>
                    </div>
                    <div class="tile-action">Review</div>
                </div>

                <!-- Schedule 3 Tile -->
                <div class="tile" onclick="openSchedule3()">
                    <div>
                        <div class="tile-icon">ğŸ’³</div>
                        <h3>Credits & Payments (Sch. 3)</h3>
                        <p>Tax credits and additional payments.</p>
                    </div>
                    <div class="tile-action" id="dash-sch3-total">Add Credits</div>
                </div>
            </div>
        </div>

        <!-- REVIEW VIEW -->
        <div id="review" class="view-section">
            <div class="header">
                <h1>Review Your 1040</h1>
                <p>This is a draft preview of your 2025 Form 1040 based on entered data.</p>
                <button class="btn btn-primary" onclick="window.TaxCore.Nav.navigate('dashboard')"
                    style="margin-top: 15px;">â† Back to Dashboard</button>
                <button class="btn btn-secondary" onclick="window.TaxCore.Print.generate()"
                    style="margin-top: 15px; margin-left:10px;">Print Return</button>
            </div>

            <div class="form-1040">
                <div class="form-1040-header">
                    <div style="font-weight:bold; font-size:1.2rem;">Form 1040</div>
                    <div>U.S. Individual Income Tax Return 2025</div>
                </div>

                <!-- Income Section -->
                <div class="line-section">Income</div>
                <div class="line-row">
                    <div class="line-num">1z</div>
                    <div class="line-desc">Wages, salaries, tips, etc.</div>
                    <div class="line-val" id="l1z">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">2b</div>
                    <div class="line-desc">Taxable interest</div>
                    <div class="line-val" id="l2b">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">3b</div>
                    <div class="line-desc">Ordinary dividends</div>
                    <div class="line-val" id="l3b">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">5b</div>
                    <div class="line-desc">Taxable amount of pensions/annuities</div>
                    <div class="line-val" id="l5b">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">6a</div>
                    <div class="line-desc">Social security benefits</div>
                    <div class="line-val" id="l6a">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">6b</div>
                    <div class="line-desc">Taxable amount of social security benefits</div>
                    <div class="line-val" id="l6b">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">7</div>
                    <div class="line-desc">Capital gain or (loss) (Schedule D)</div>
                    <div class="line-val" id="l7">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">8</div>
                    <div class="line-desc">Other income (Schedule 1, line 10)</div>
                    <div class="line-val" id="l8">$0.00</div>
                </div>
                <div class="line-row total">
                    <div class="line-num">9</div>
                    <div class="line-desc">Total Income</div>
                    <div class="line-val" id="l9">$0.00</div>
                </div>

                <!-- Adjustments -->
                <div class="line-section">Adjustments</div>
                <div class="line-row">
                    <div class="line-num">10</div>
                    <div class="line-desc">Adjustments to income (Schedule 1, line 26)</div>
                    <div class="line-val" id="l10">$0.00</div>
                </div>
                <div class="line-row total">
                    <div class="line-num">11</div>
                    <div class="line-desc">Adjusted Gross Income (AGI)</div>
                    <div class="line-val" id="l11">$0.00</div>
                </div>

                <!-- Deductions -->
                <div class="line-section">Standard Deduction</div>
                <div class="line-row">
                    <div class="line-num">12</div>
                    <div class="line-desc">Standard Deduction or Itemized Deductions</div>
                    <div class="line-val" id="l12">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">13</div>
                    <div class="line-desc">Qualified business income deduction (Form 8995)</div>
                    <div class="line-val" id="l13">$0.00</div>
                </div>
                <div class="line-row total">
                    <div class="line-num">15</div>
                    <div class="line-desc">Taxable Income</div>
                    <div class="line-val" id="l15">$0.00</div>
                </div>

                <!-- Tax -->
                <div class="line-section">Tax and Credits</div>
                <div class="line-row">
                    <div class="line-num">16</div>
                    <div class="line-desc">Tax (see instructions)</div>
                    <div class="line-val" id="l16">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">18</div>
                    <div class="line-desc">Total Tax (before credits)</div>
                    <div class="line-val" id="l18">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">19</div>
                    <div class="line-desc">Child tax credit or credit for other dependents (Schedule 8812)</div>
                    <div class="line-val" id="l19">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">20</div>
                    <div class="line-desc">Amount from Schedule 3, line 8</div>
                    <div class="line-val" id="l20">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">21</div>
                    <div class="line-desc">Add lines 19 and 20</div>
                    <div class="line-val" id="l21">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">22</div>
                    <div class="line-desc">Subtract line 21 from line 18 (min 0)</div>
                    <div class="line-val" id="l22">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">23</div>
                    <div class="line-desc">Other taxes, including self-employment tax (Sch. 2)</div>
                    <div class="line-val" id="l23">$0.00</div>
                </div>
                <div class="line-row total">
                    <div class="line-num">24</div>
                    <div class="line-desc">Total Tax</div>
                    <div class="line-val" id="l24">$0.00</div>
                </div>

                <!-- Payments -->
                <div class="line-section">Payments</div>
                <div class="line-row">
                    <div class="line-num">25a</div>
                    <div class="line-desc">Federal income tax withheld from Form(s) W-2</div>
                    <div class="line-val" id="l25a">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">25b</div>
                    <div class="line-desc">Federal income tax withheld from Form(s) 1099</div>
                    <div class="line-val" id="l25b">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">28</div>
                    <div class="line-desc">Additional child tax credit (Schedule 8812)</div>
                    <div class="line-val" id="l28">$0.00</div>
                </div>
                <div class="line-row">
                    <div class="line-num">31</div>
                    <div class="line-desc">Other payments (Schedule 3, line 15)</div>
                    <div class="line-val" id="l31">$0.00</div>
                </div>
                <div class="line-row total">
                    <div class="line-num">33</div>
                    <div class="line-desc">Total Payments</div>
                    <div class="line-val" id="l33">$0.00</div>
                </div>

                <!-- Refund -->
                <div class="line-section" style="background:#e6fcf5; color:#087f5b;">Refund</div>
                <div class="line-row big-result">
                    <div class="line-num">34</div>
                    <div class="line-desc">Amount you overpaid</div>
                    <div class="line-val" id="l34">$0.00</div>
                </div>

                <!-- Owe -->
                <div class="line-section" style="background:#fff5f5; color:#c92a2a;">Amount You Owe</div>
                <div class="line-row big-result">
                    <div class="line-num">37</div>
                    <div class="line-desc">Amount you owe</div>
                    <div class="line-val" id="l37">$0.00</div>
                </div>

            </div>

            <!-- Appendix for Print only -->
            <div id="print-appendix" style="display:none;"></div>

            <pre id="debug-output"
                style="margin-top: 30px; background: #f1f3f5; padding: 20px; border-radius: 8px; display:none;"></pre>
        </div>

    </div>

    <!-- MODALS -->

    <!-- W-2 Modal -->
    <div id="modal-w2" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add W-2</div>
                <div class="close" onclick="closeW2()">Ã—</div>
            </div>

            <div class="form-group">
                <label>Employer Name</label>
                <input type="text" id="w2-employer" placeholder="e.g. Acme Corp">
            </div>

            <div class="form-group">
                <label>Who works here?</label>
                <select id="w2-owner" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
                    <option value="taxpayer">Taxpayer</option>
                    <option value="spouse">Spouse</option>
                </select>
            </div>

            <div class="form-row">
                <div class="form-group half">
                    <label>Wages (Box 1)</label>
                    <input type="number" id="w2-wages" placeholder="0.00">
                </div>
                <div class="form-group half">
                    <label>Federal Tax Withheld (Box 2)</label>
                    <input type="number" id="w2-fedtax" placeholder="0.00">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group half">
                    <label>Social Security Wages (Box 3)</label>
                    <input type="number" id="w2-ss-wages" placeholder="0.00">
                </div>
                <div class="form-group half">
                    <label>Social Security Tax (Box 4)</label>
                    <input type="number" id="w2-ss-tax" placeholder="0.00">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group half">
                    <label>Medicare Wages (Box 5)</label>
                    <input type="number" id="w2-med-wages" placeholder="0.00">
                </div>
                <div class="form-group half">
                    <label>Medicare Tax (Box 6)</label>
                    <input type="number" id="w2-med-tax" placeholder="0.00">
                </div>
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost" onclick="closeW2()">Cancel</button>
                <button class="btn btn-primary" id="btn-save-w2">Save W-2</button>
            </div>
        </div>
    </div>

    <!-- 1099-INT Modal -->
    <div id="modal-int" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add 1099-INT</div>
                <div class="close" onclick="closeInt()">Ã—</div>
            </div>
            <div class="form-group">
                <label>Payer's Name</label>
                <input type="text" id="int-payer" placeholder="e.g. Chase Bank">
            </div>
            <div class="form-group">
                <label>Interest Income (Box 1)</label>
                <input type="number" id="int-amount" placeholder="0.00">
            </div>
            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost" onclick="closeInt()">Cancel</button>
                <button class="btn btn-primary" id="btn-save-int">Save Interest</button>
            </div>
        </div>
    </div>

    <!-- 1099-DIV Modal -->
    <div id="modal-div" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add 1099-DIV</div>
                <div class="close" onclick="closeDiv()">Ã—</div>
            </div>
            <div class="form-group">
                <label>Payer's Name</label>
                <input type="text" id="div-payer" placeholder="e.g. Fidelity">
            </div>
            <div class="form-row">
                <div class="form-group half">
                    <label>Ordinary Dividends (1a)</label>
                    <input type="number" id="div-ord" placeholder="0.00">
                </div>
                <div class="form-group half">
                    <label>Qualified Dividends (1b)</label>
                    <input type="number" id="div-qual" placeholder="0.00">
                </div>
            </div>
            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost" onclick="closeDiv()">Cancel</button>
                <button class="btn btn-primary" id="btn-save-div">Save Dividends</button>
            </div>
        </div>
    </div>

    <!-- Schedule 3 Modal -->
    <div id="modal-schedule3" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <div class="modal-title">Schedule 3 - Additional Credits & Payments</div>
                <div class="close" onclick="window.TaxCore.Nav.closeModal('modal-schedule3')">Ã—</div>
            </div>

            <!-- Tabs -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #e9ecef;">
                <button id="sch3-tab-part1" class="tab-btn active"
                    style="flex: 1; padding: 10px; border: none; background: none; cursor: pointer; font-weight: 600; border-bottom: 3px solid var(--secondary-color);">
                    Part I: Nonrefundable Credits
                </button>
                <button id="sch3-tab-part2" class="tab-btn"
                    style="flex: 1; padding: 10px; border: none; background: none; cursor: pointer; font-weight: 600; border-bottom: 3px solid transparent;">
                    Part II: Other Payments
                </button>
            </div>

            <!-- Part I: Nonrefundable Credits -->
            <div id="sch3-part1-content">
                <div class="form-group">
                    <label>Foreign Tax Credit (Line 1)</label>
                    <input type="number" id="sch3-foreign-tax" placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>Child and Dependent Care Expenses Credit (Line 2)</label>
                    <input type="number" id="sch3-child-care" placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>Education Credits (Line 3)</label>
                    <input type="number" id="sch3-education" placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>Retirement Savings Contributions Credit (Line 4)</label>
                    <input type="number" id="sch3-retirement" placeholder="0.00">
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label>Residential Clean Energy Credit (Line 5a)</label>
                        <input type="number" id="sch3-energy-clean" placeholder="0.00">
                    </div>
                    <div class="form-group half">
                        <label>Energy Efficient Home Improvement (Line 5b)</label>
                        <input type="number" id="sch3-energy-efficient" placeholder="0.00">
                    </div>
                </div>

                <div class="form-group">
                    <label>Other Nonrefundable Credits (Lines 6a-6z total)</label>
                    <input type="number" id="sch3-other-nonrefund" placeholder="0.00">
                </div>
            </div>

            <!-- Part II: Other Payments and Refundable Credits -->
            <div id="sch3-part2-content" style="display: none;">
                <div class="form-group">
                    <label>Net Premium Tax Credit (Line 9)</label>
                    <input type="number" id="sch3-premium-tax" placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>Amount Paid with Extension to File (Line 10)</label>
                    <input type="number" id="sch3-extension-payment" placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>Excess Social Security and RRTA Tax Withheld (Line 11)</label>
                    <input type="number" id="sch3-excess-ss" placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>Credit for Federal Tax on Fuels (Line 12)</label>
                    <input type="number" id="sch3-fuel-credit" placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>Other Refundable Credits (Lines 13a-13z total)</label>
                    <input type="number" id="sch3-other-refund" placeholder="0.00">
                </div>
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost" onclick="window.TaxCore.Nav.closeModal('modal-schedule3')">Cancel</button>
                <button class="btn btn-primary" id="btn-save-schedule3">Save Credits & Payments</button>
            </div>
        </div>
    </div>

    <!-- SSA-1099 Modal -->
    <div id="modal-ssa1099" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">SSA-1099 (Social Security)</div>
                <div class="close" onclick="window.TaxCore.Nav.closeModal('modal-ssa1099')">Ã—</div>
            </div>

            <div class="form-group">
                <label>Identify Payer</label>
                <select id="ssa-person" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
                    <option value="taxpayer">Taxpayer</option>
                    <option value="spouse">Spouse</option>
                </select>
            </div>

            <div class="form-group">
                <label>Net Benefits (Box 5)</label>
                <input type="number" id="ssa-net-benefits" placeholder="0.00">
            </div>

            <div class="form-group">
                <label>Federal Income Tax Withheld (Box 6)</label>
                <input type="number" id="ssa-fed-tax" placeholder="0.00">
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost" onclick="window.TaxCore.Nav.closeModal('modal-ssa1099')">Cancel</button>
                <button class="btn btn-primary" onclick="window.TaxCore.Forms.SSA1099.save()">Save Benefits</button>
            </div>
        </div>
    </div>

    <!-- Schedule C Modal -->
    <div id="modal-schc" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Business Income (Schedule C)</div>
                <div class="close" onclick="window.TaxCore.Nav.closeModal('modal-schc')">Ã—</div>
            </div>

            <div class="form-group">
                <label>Business Name / Description</label>
                <input type="text" id="schc-biz-name" placeholder="e.g. Consulting, Etsy Shop">
            </div>

            <div class="form-group">
                <label>Who owns this business?</label>
                <select id="schc-owner" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
                    <option value="taxpayer">Taxpayer</option>
                    <option value="spouse">Spouse</option>
                </select>
            </div>

            <div class="form-row">
                <div class="form-group half">
                    <label>Gross Receipts</label>
                    <input type="number" id="schc-gross" placeholder="0.00">
                </div>
                <div class="form-group half">
                    <label>Total Expenses</label>
                    <input type="number" id="schc-expenses" placeholder="0.00">
                </div>
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost" onclick="window.TaxCore.Nav.closeModal('modal-schc')">Cancel</button>
                <button class="btn btn-primary" id="btn-save-schc">Save Business</button>
            </div>
        </div>
    </div>

    <!-- Schedule D Modal -->
    <div id="modal-schd" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Capital Gains / Losses (Schedule D)</div>
                <div class="close" onclick="window.TaxCore.Nav.closeModal('modal-schd')">Ã—</div>
            </div>

            <div class="form-group">
                <label>Entry Type</label>
                <select id="schd-type" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;"
                    onchange="window.TaxCore.Forms.ScheduleD.toggleType()">
                    <option value="sale">Asset Sale (Form 8949)</option>
                    <option value="carryover">Capital Loss Carryover</option>
                </select>
            </div>

            <div class="form-group">
                <label>Description (Optional)</label>
                <input type="text" id="schd-description" placeholder="e.g. 100 shares AAPL">
            </div>

            <!-- Asset Sale Fields -->
            <div id="schd-asset-fields">
                <div class="form-group">
                    <label>Reporting Category (Form 8949)</label>
                    <select id="schd-category"
                        style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
                        <option value="A">Short-term: Basis reported to IRS (Box A)</option>
                        <option value="B">Short-term: Basis NOT reported to IRS (Box B)</option>
                        <option value="C">Short-term: No 1099-B received (Box C)</option>
                        <option value="D">Long-term: Basis reported to IRS (Box D)</option>
                        <option value="E">Long-term: Basis NOT reported to IRS (Box E)</option>
                        <option value="F">Long-term: No 1099-B received (Box F)</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label>Date Acquired</label>
                        <input type="date" id="schd-acquired">
                    </div>
                    <div class="form-group half">
                        <label>Date Sold</label>
                        <input type="date" id="schd-sold">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label>Sales Proceeds</label>
                        <input type="number" id="schd-proceeds" placeholder="0.00">
                    </div>
                    <div class="form-group half">
                        <label>Cost Basis</label>
                        <input type="number" id="schd-basis" placeholder="0.00">
                    </div>
                </div>
            </div>

            <!-- Carryover Fields -->
            <div id="schd-carryover-fields" style="display: none;">
                <div class="form-group">
                    <label>Carryover Type</label>
                    <select id="schd-carryover-term"
                        style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
                        <option value="ST">Short-Term Carryover (from 2024 Schedule D, line 7)</option>
                        <option value="LT">Long-Term Carryover (from 2024 Schedule D, line 15)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Loss Amount (Enter as positive number)</label>
                    <input type="number" id="schd-carryover-amount" placeholder="0.00">
                </div>
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost" onclick="window.TaxCore.Nav.closeModal('modal-schd')">Cancel</button>
                <button class="btn btn-primary" id="btn-save-schd">Save Asset</button>
            </div>
        </div>
    </div>

    <!-- Schedule E Modal -->
    <div id="modal-sche" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Rental & Royalties (Schedule E)</div>
                <div class="close" onclick="window.TaxCore.Nav.closeModal('modal-sche')">Ã—</div>
            </div>

            <div class="form-group">
                <label>Property Description / Location</label>
                <input type="text" id="sche-description" placeholder="e.g. 123 Main St Condo">
            </div>

            <div class="form-row">
                <div class="form-group half">
                    <label>Rents Received</label>
                    <input type="number" id="sche-rents" placeholder="0.00">
                </div>
                <div class="form-group half">
                    <label>Royalties Received</label>
                    <input type="number" id="sche-royalties" placeholder="0.00">
                </div>
            </div>

            <div class="form-group">
                <label>Total Expenses (Repairs, Insurance, etc.)</label>
                <input type="number" id="sche-expenses" placeholder="0.00">
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost" onclick="window.TaxCore.Nav.closeModal('modal-sche')">Cancel</button>
                <button class="btn btn-primary" id="btn-save-sche">Save Entry</button>
            </div>
        </div>
    </div>

    <!-- Dependents Modal -->
    <div id="modal-dependents" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <div class="modal-title">Dependents</div>
                <div class="close" onclick="window.TaxCore.Nav.closeModal('modal-dependents')">Ã—</div>
            </div>

            <div class="form-group">
                <label>Number of Qualifying Children Under 17 (with SSN)</label>
                <input type="number" id="dep-qualifying-children" placeholder="0" min="0" max="20">
                <small style="color: var(--text-muted); display: block; margin-top: 5px;">
                    Each qualifying child provides up to $2,000 Child Tax Credit
                </small>
            </div>

            <div class="form-group">
                <label>Number of Other Dependents</label>
                <input type="number" id="dep-other-dependents" placeholder="0" min="0" max="20">
                <small style="color: var(--text-muted); display: block; margin-top: 5px;">
                    Each other dependent provides $500 Credit for Other Dependents
                </small>
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost"
                    onclick="window.TaxCore.Nav.closeModal('modal-dependents')">Cancel</button>
                <button class="btn btn-primary" id="btn-save-dependents">Save Dependents</button>
            </div>
        </div>
    </div>

    <!-- 1099-MISC Modal -->
    <div id="modal-misc" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add 1099-MISC (Other Income)</div>
                <div class="close" onclick="window.TaxCore.Nav.closeModal('modal-misc')">Ã—</div>
            </div>

            <div class="form-group">
                <label>Payer's Name</label>
                <input type="text" id="misc-payer" placeholder="e.g. Acme Corp">
            </div>

            <div class="form-row">
                <div class="form-group half">
                    <label>Rents (Box 1)</label>
                    <input type="number" id="misc-rents" placeholder="0.00">
                </div>
                <div class="form-group half">
                    <label>Royalties (Box 2)</label>
                    <input type="number" id="misc-royalties" placeholder="0.00">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group half">
                    <label>Other Income (Box 3)</label>
                    <input type="number" id="misc-other" placeholder="0.00">
                </div>
                <div class="form-group half">
                    <label>Federal Tax Withheld (Box 4)</label>
                    <input type="number" id="misc-fedtax" placeholder="0.00">
                </div>
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost" onclick="window.TaxCore.Nav.closeModal('modal-misc')">Cancel</button>
                <button class="btn btn-primary" id="btn-save-misc">Save 1099-MISC</button>
            </div>
        </div>
    </div>

    <!-- 1099-R Modal -->
    <div id="modal-r" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add 1099-R (Retirement)</div>
                <div class="close" onclick="window.TaxCore.Nav.closeModal('modal-r')">Ã—</div>
            </div>

            <div class="form-group">
                <label>Payer's Name</label>
                <input type="text" id="r-payer" placeholder="e.g. Fidelity">
            </div>

            <div class="form-group">
                <label style="display:flex; align-items:center;">
                    <input type="checkbox" id="r-is-ira" style="width:auto; margin-right:10px;">
                    Attributes to IRA / SEP / SIMPLE (Box 7 check)
                </label>
            </div>

            <div class="form-row">
                <div class="form-group half">
                    <label>Gross Distribution (Box 1)</label>
                    <input type="number" id="r-gross" placeholder="0.00">
                </div>
                <div class="form-group half">
                    <label>Taxable Amount (Box 2a)</label>
                    <input type="number" id="r-taxable" placeholder="0.00">
                </div>
            </div>

            <div class="form-group">
                <label>Federal Tax Withheld (Box 4)</label>
                <input type="number" id="r-fedtax" placeholder="0.00">
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-ghost" onclick="window.TaxCore.Nav.closeModal('modal-r')">Cancel</button>
                <button class="btn btn-primary" id="btn-save-r">Save 1099-R</button>
            </div>
        </div>
    </div>

    <script src="modules/tax_tables.js"></script>
    <script src="modules/constants.js"></script>
    <script src="modules/calc_8812.js"></script>
    <script src="modules/calc_8995.js"></script>
    <script src="modules/calc_scheduleSE.js"></script>
    <script src="modules/calc_scheduleE.js"></script>
    <script src="modules/calc_1040.js"></script>
    <script src="modules/state.js"></script>
    <script src="modules/navigation.js"></script>
    <script src="modules/forms/w2.js"></script>
    <script src="modules/forms/1099int.js"></script>
    <script src="modules/forms/1099div.js"></script>
    <script src="modules/forms/schedule3.js"></script>
    <script src="modules/forms/dependents.js"></script>
    <script src="modules/print.js"></script>
    <script src="modules/calc_scheduleC.js"></script>
    <script src="modules/forms/scheduleC.js"></script>
    <script src="modules/calc_scheduleD.js"></script>
    <script src="modules/forms/scheduleD.js"></script>
    <script src="modules/forms/scheduleE.js"></script>

    <script src="modules/forms/1099misc.js"></script>
    <script src="modules/forms/1099r.js"></script>
    <script src="modules/forms/ssa1099.js"></script>
    <script src="script.js"></script>

    <!-- Inline Wrappers for Global access from HTML clicks -->
    <script>
        // Global helper for the tile click
        window.openW2 = () => window.TaxCore.Forms.W2.open();
        window.closeW2 = () => window.TaxCore.Nav.closeModal('modal-w2');

        window.openInt = () => window.TaxCore.Forms.Int.open();
        window.closeInt = () => window.TaxCore.Nav.closeModal('modal-int');

        window.openDiv = () => window.TaxCore.Forms.Div.open();
        window.closeDiv = () => window.TaxCore.Nav.closeModal('modal-div');



        window.openSchedule3 = () => window.TaxCore.Forms.Schedule3.open();

        window.openDependents = () => window.TaxCore.Forms.Dependents.open();

        window.openSchC = () => window.TaxCore.Forms.ScheduleC.open();

        window.openSchD = () => window.TaxCore.Forms.ScheduleD.open();

        window.openSchE = () => window.TaxCore.Forms.ScheduleE.open();

        window.openMisc = () => window.TaxCore.Forms.Misc.open();

        window.openR = () => window.TaxCore.Forms.R.open();

        window.openReview = () => window.TaxCore.Nav.navigate('review');

        // Disclaimer Logic
        function setLang(lang) {
            const en = document.getElementById('text-en');
            const cn = document.getElementById('text-cn');
            const btns = document.querySelectorAll('.btn-lang');

            if (lang === 'en') {
                en.style.display = 'block';
                cn.style.display = 'none';
                btns[0].classList.add('active');
                btns[1].classList.remove('active');
            } else {
                en.style.display = 'none';
                cn.style.display = 'block';
                btns[0].classList.remove('active');
                btns[1].classList.add('active');
            }
        }

        function agree() {
            document.getElementById('disclaimer-overlay').style.display = 'none';
        }

        function disagree() {
            document.getElementById('disclaimer-overlay').style.display = 'none';
            document.getElementById('blocked-view').style.display = 'flex';
        }

        function resetApp() {
            document.getElementById('blocked-view').style.display = 'none';
            document.getElementById('disclaimer-overlay').style.display = 'flex';
        }
    </script>

</body>

</html>
