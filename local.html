<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>NC Life | Community Guide</title>

  <style>
    :root {
      --bg: #f2f2f7; --card: #ffffff; --text: #1c1c1e; --sub: #8e8e93;
      --primary: #5856d6; --accent: #007aff; --border: rgba(0,0,0,0.08);
      --nav-bg: rgba(2, 136, 209, 0.1); --nav-text: #0288d1;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #000000; --card: #1c1c1e; --text: #ffffff; --sub: #8e8e93;
        --primary: #5e5ce6; --accent: #0a84ff; --border: rgba(255,255,255,0.1);
        --nav-bg: rgba(10, 132, 255, 0.15); --nav-text: #4fc3f7;
      }
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    
    body { 
      margin: 0; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif; 
      background: var(--bg); color: var(--text); line-height: 1.4;
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
    }

    .mini-header { padding: 15px 20px 10px; display: flex; justify-content: space-between; align-items: baseline; }
    .mini-header h1 { margin: 0; font-size: 1.7rem; font-weight: 800; letter-spacing: -0.5px; }
    .mini-header span { font-size: 0.8rem; color: var(--sub); font-weight: 500; text-transform: uppercase; }

    .container { padding: 0 16px; max-width: 600px; margin: auto; }

    /* Sticky Search Bar */
    .search-wrapper { position: sticky; top: 0; z-index: 100; padding: 10px 0; background: var(--bg); }
    .controls { 
      display: flex; flex-direction: column; gap: 8px; padding: 8px; border-radius: 14px;
      background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.05); border: 1px solid var(--border);
    }
    .control-row { display: flex; gap: 8px; }
    @media (prefers-color-scheme: dark) { .controls { background: rgba(44, 44, 46, 0.8); } }
    
    .controls input, .controls select { 
      padding: 10px; border-radius: 10px; border: none; background: var(--bg); 
      color: var(--text); font-size: 0.9rem; outline: none;
    }
    .controls input { flex: 2; }
    .controls select { flex: 1.2; font-weight: 600; cursor: pointer; }

    .section-group { margin-bottom: 25px; scroll-margin-top: 140px; }
    .section-title { 
      margin: 20px 0 12px 4px; font-size: 1.1rem; font-weight: 700; 
      color: var(--text); display: flex; align-items: center; gap: 8px;
    }

    .card { 
      background: var(--card); border-radius: 18px; padding: 18px; 
      box-shadow: 0 2px 8px rgba(0,0,0,0.02); border: 1px solid var(--border);
    }

    .btn-link { font-size: 0.8rem; color: var(--accent); text-decoration: none; font-weight: 600; margin-right: 10px;}

    #eventData { font-size: 0.9rem; overflow: hidden; }
    #eventData ul { padding: 0; margin: 0; list-style: none; }
    #eventData li { margin-bottom: 12px; border-bottom: 0.5px solid var(--border); padding-bottom: 8px; }
    #eventData li:last-child { border-bottom: none; }
    #eventData a { font-weight: 600; color: var(--accent); text-decoration: none; }

    .hidden-events { display: none; }
    .more-btn {
      display: block; width: 100%; padding: 10px; margin-top: 10px;
      background: var(--bg); color: var(--accent); border: none;
      border-radius: 10px; font-weight: 700; font-size: 0.85rem; cursor: pointer;
    }

    .link-list { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-top: 5px; }
    .link-item {
      display: flex; align-items: center; justify-content: center;
      padding: 12px 8px; background: var(--bg); border-radius: 12px;
      text-decoration: none; color: var(--text); font-size: 0.85rem;
      font-weight: 500; text-align: center;
    }

    .info-list { list-style: none; padding: 0; margin: 0; }
    .info-item { padding: 10px 0; border-bottom: 0.5px solid var(--border); }
    .info-item:last-child { border-bottom: none; }
    .info-label { display: block; font-size: 0.7rem; color: var(--sub); margin-bottom: 4px; font-weight: 600; text-transform: uppercase; }

    a { color: var(--accent); text-decoration: none; }
    .nav-link { 
      display: inline-block; background: var(--nav-bg); color: var(--nav-text); 
      padding: 4px 10px; border-radius: 8px; font-size: 0.8rem; margin-top: 4px; font-weight: 700;
    }
    
    #emptyState { display: none; text-align: center; padding: 40px; color: var(--sub); font-size: 0.9rem; }
    footer { text-align: center; margin-top: 40px; color: var(--sub); font-size: 0.75rem; padding: 20px; }
  </style>
</head>

<body>

<div class="mini-header">
  <h1>NC Life</h1>
  <span>Community Guide</span>
</div>

<div class="container">

  <div class="search-wrapper">
    <div class="controls">
      <div class="control-row">
        <input id="searchInput" type="search" placeholder="Search keywords..." />
        <select id="categoryFilter">
          <option value="all">All Categories</option>
          <option value="events">âš¡ Upcoming Events</option>
          <option value="health">ğŸ’ª Health & Medical</option>
          <option value="news">ğŸ“° Chinese News</option>
          <option value="life">ğŸ›ï¸ Shopping & Life</option>
          <option value="food">ğŸ½ï¸ Nearby Dining</option>
          <option value="asianmarkets">ğŸ›’ Asian Markets</option>
          <option value="auto">ğŸš— Auto Services</option>
          <option value="farms">ğŸ“ U-Pick Farms</option>
          <option value="finance">ğŸ’° Finance & Stocks</option>
          <option value="internet">ğŸ’» Travel Internet</option>
        </select>
      </div>
    </div>
  </div>

  <div id="emptyState">No results found</div>

  <div id="contentList">
    
    <div class="section-group" data-cat-group="events" id="events-section">
      <div class="section-title">ğŸ“… Upcoming Charlotte Events</div>
      <div class="card item" data-category="events">
        <div id="eventData">Loading events...</div>
        <button id="showMoreBtn" class="more-btn" style="display:none;">Show More</button>
      </div>
    </div>

    <div class="section-group" data-cat-group="health">
      <div class="section-title">ğŸ’ª Health & Dental</div>
      <div class="card item" data-category="health">
        <div class="info-list">
          <div class="info-item">
            <a href="https://www.ollietree.org/cn/%e6%a9%84%e6%a6%84%e6%a0%91%e8%b5%84%e8%ae%af/">Ollie Tree Health</a> | 
            <a href="https://brightdentalcharlotte.com">Bright Dental</a> | 
            <a href="https://capstonedentalnc.com">Capstone Dental</a>
          </div>
        </div>
      </div>
    </div>

    <div class="section-group" data-cat-group="news">
      <div class="section-title">ğŸ“° Chinese News</div>
      <div class="card item" data-category="news">
        <div class="link-list">
          <a class="link-item" href="https://www.wenxuecity.com/news/">Wenxuecity</a>
          <a class="link-item" href="https://huaren.us/">Huaren.us</a>
          <a class="link-item" href="https://www.creaders.net/">Creaders</a>
          <a class="link-item" href="https://www.worldjournal.com/">World Journal</a>
        </div>
      </div>
    </div>

    <div class="section-group" data-cat-group="life">
      <div class="section-title">ğŸ›ï¸ Shopping & Lifestyle</div>
      <div class="card item" data-category="life">
        <div class="link-list">
          <a class="link-item" href="https://www.dealmoon.com/">Dealmoon</a>
          <a class="link-item" href="https://www.yami.com/zh">Yamibuy</a>
          <a class="link-item" href="https://www.1point3acres.com/bbs/">1Point3Acres</a>
          <a class="link-item" href="https://newmitbbs.com/">NewMitBBS</a>
        </div>
      </div>
    </div>

    <div class="section-group" data-cat-group="food">
      <div class="section-title">ğŸ½ï¸ Nearby Dining</div>
      <div class="card item" data-category="food">
        <div class="info-list">
          <div class="info-item">
            <strong>East Pearl</strong><br>
            <a href="#" class="nav-link">ğŸ“ 1810 Liddell Ln</a>
          </div>
          <div class="info-item">
            <strong>Royal China (Duluth)</strong><br>
            <a href="#" class="nav-link">ğŸ“ 3960 Venture Dr</a>
          </div>
          <div class="info-item">
            <span class="info-label">RTP Featured</span>
            <a href="https://acaciatreenc.com">Acacia</a> | <a href="https://www.chengdu7cary.com">Chengdu 7</a> | <a href="https://nanxiangexpress.com/menu/">Nan Xiang</a>
          </div>
        </div>
      </div>
    </div>

    <div class="section-group" data-cat-group="asianmarkets">
      <div class="section-title">ğŸ›’ Asian Markets & Kitchen</div>
      <div class="card item" data-category="asianmarkets">
        <div class="info-list">
          <div class="info-item">
            <strong>Bottoms Up Wine & Spirits</strong> (Chinese Liquor)<br>
            <a href="https://www.facebook.com/sc.bottomsup/" class="btn-link">Facebook Page</a>
            <a href="#" class="nav-link">ğŸ“ Fort Mill, SC</a>
          </div>
          <div class="info-item">
            <strong>Super G Mart</strong><br>
            <a href="https://www.supergmart.com" class="btn-link">Official Site</a><br>
            <a href="#" class="nav-link">ğŸ“ Pineville</a>
            <a href="#" class="nav-link">ğŸ“ Independence</a>
          </div>
          <div class="info-item">
            <strong>New Asia Market</strong><br>
            <a href="#" class="nav-link">ğŸ“ 4400 Potter Rd</a><br>
            <a href="https://asianmarketplz.com" class="btn-link">The Plaza Website</a>
          </div>
          <div class="info-item">
            <span class="info-label">Kitchenware</span>
            <a href="https://us.fotileglobal.com">Fotile</a> | <a href="https://www.bk-cookware.com/black-steel">BK Cookware</a>
          </div>
        </div>
      </div>
    </div>

    <div class="section-group" data-cat-group="auto">
      <div class="section-title">ğŸš— Auto Services</div>
      <div class="card item" data-category="auto">
        <div class="info-list">
          <div class="info-item">
            <span class="info-label">Repair Shops</span>
            <a href="http://www.createAutoBody.com">Create Auto Body</a> | 
            <a href="https://www.pepboys.com/">Pep Boys</a> |
            <a href="https://www.mrinspectionmatthews.com">Mr. Inspection</a> 
          </div>
          <div class="info-item"><span class="info-label">Insurance</span>Progressive, Traveler, Cincinnati</div>
        </div>
      </div>
    </div>

    <div class="section-group" data-cat-group="farms">
      <div class="section-title">ğŸ“ U-Pick Farms</div>
      <div class="card item" data-category="farms">
        <div class="info-list">
          <div class="info-item">
            <strong>Big H Farm</strong><br>
            <a href="https://bighfarm.com" class="btn-link">Official Site</a>
            <a href="#" class="nav-link">ğŸ“ 1953 Dilling Farm Rd</a>
          </div>
          <div class="info-item">
            <span class="info-label">Other Popular Farms</span>
            <a href="https://www.lockmanvineyard.com/">Lockman Vineyard</a> | 
            <a href="https://www.linebergersfarm.com/">Lineberger's</a> | 
            <a href="http://grandadsapples.com">Grandad Apple</a>
          </div>
        </div>
      </div>
    </div>

    <div class="section-group" data-cat-group="internet">
      <div class="section-title">ğŸ’»ğŸ“¶ Travel Internet</div>
      <div class="card item" data-category="internet">
        <div class="info-list">
          <div class="info-item">
            <span class="info-label">eSIM Recommendations</span>
            <a href="https://www.airalo.com/">Airalo</a> | 
            <a href="https://etravelsim.com">etravelSIM</a> | 
            <a href="https://www.getnomad.app/">Nomad</a>
          </div>
        </div>
      </div>
    </div>

    <div class="section-group" data-cat-group="finance">
      <div class="section-title">ğŸ’° Finance & Stocks</div>
      <div class="card item" data-category="finance">
        <div class="info-list">
          <div class="info-item">
            <span class="info-label">Stock Tracking</span>
            <a href="https://www.quiverquant.com/politicians/">Quiver Quantitative</a> | 
            <a href="https://www.capitoltrades.com/">Capitol Trades</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>Â© 2026 NC Life Guide<br>Bank of World Â· bankofworld@gmail.com</p>
  </footer>
</div>

<script>
const eventData = document.getElementById("eventData");
const showMoreBtn = document.getElementById("showMoreBtn");

async function loadEvents() {
  try {
    const response = await fetch('https://yonggewang.github.io/events/');
    if (!response.ok) throw new Error();
    const html = await response.text();
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    const allItems = Array.from(doc.querySelectorAll('li'));
    
    if (allItems.length === 0) {
      eventData.innerHTML = "No upcoming events scheduled.";
      return;
    }

    const visibleItems = allItems.slice(0, 3);
    const hiddenItems = allItems.slice(3);

    let contentHtml = '<ul>';
    visibleItems.forEach(li => contentHtml += li.outerHTML);
    
    if (hiddenItems.length > 0) {
      contentHtml += '<div id="moreContent" class="hidden-events">';
      hiddenItems.forEach(li => contentHtml += li.outerHTML);
      contentHtml += '</div>';
      showMoreBtn.style.display = "block";
    }
    contentHtml += '</ul>';
    
    eventData.innerHTML = contentHtml;
  } catch (error) {
    eventData.innerHTML = '<span style="color:red;">Failed to load events.</span>';
  }
}

showMoreBtn.addEventListener("click", () => {
  const moreContent = document.getElementById("moreContent");
  if (moreContent.style.display === "block") {
    moreContent.style.display = "none";
    showMoreBtn.innerText = "Show More";
  } else {
    moreContent.style.display = "block";
    showMoreBtn.innerText = "Show Less";
  }
});

const searchInput = document.getElementById("searchInput");
const categoryFilter = document.getElementById("categoryFilter");
const items = document.querySelectorAll(".item");
const groups = document.querySelectorAll(".section-group");
const emptyState = document.getElementById("emptyState");

function filterItems() {
  const k = searchInput.value.toLowerCase().trim();
  const c = categoryFilter.value;
  let visibleTotal = 0;

  items.forEach(item => {
    const text = item.innerText.toLowerCase();
    const matchSearch = text.includes(k);
    const matchCategory = (c === "all" || item.dataset.category === c);
    
    if (matchSearch && matchCategory) {
      item.style.display = "";
      visibleTotal++;
    } else {
      item.style.display = "none";
    }
  });

  groups.forEach(group => {
    const visibleInGroup = group.querySelectorAll('.item:not([style*="display: none"])');
    group.style.display = visibleInGroup.length > 0 ? "" : "none";
  });

  emptyState.style.display = visibleTotal > 0 ? "none" : "block";
}

searchInput.addEventListener("input", filterItems);
categoryFilter.addEventListener("change", filterItems);
window.onload = loadEvents;
</script>

</body>
</html>
