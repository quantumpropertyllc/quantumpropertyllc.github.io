<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åŒ—å¡æˆ¿äº§æŠ•èµ„åˆ†æå·¥å…·</title>
<style>
:root{
  --bg:#f2f2f7; --card:#fff; --text:#1c1c1e; --sub:#8e8e93;
  --primary:#5856d6; --accent:#007aff; --border:rgba(0,0,0,0.05);
  --input-bg:#f2f2f7; --nav-bg:#e1f5fe; --nav-text:#0288d1;
  --highlight-rent:#d0f0c0; --highlight-roi:#c0e0ff;
  --btn-link-bg:rgba(0,122,255,0.1);
  --btn-link-text:#007aff;
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#000; --card:#1c1c1e; --text:#fff; --sub:#8e8e93;
    --primary:#5e5ce6; --accent:#0a84ff; --border:rgba(255,255,255,0.1);
    --input-bg:#2c2c2e;
    --highlight-rent:#274c1b; --highlight-roi:#1b364c;
    --btn-link-bg:rgba(10,132,255,0.2); --btn-link-text:#0a84ff;
  }
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","PingFang SC",sans-serif;background:var(--bg);color:var(--text);line-height:1.5;}
.container{max-width:700px;margin:auto;padding:0 16px;}
header{padding:40px 20px 25px;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;border-radius:0 0 24px 24px;margin-bottom:20px;}
header h1{margin:0;font-size:1.6rem;font-weight:800;}
header p{margin:5px 0 0;font-size:0.85rem;opacity:0.9;}

.section-title{margin:30px 0 15px 4px;font-size:1.2rem;font-weight:700;display:flex;align-items:center;justify-content:space-between;cursor:pointer;}
.section-title span{font-size:0.9rem;color:var(--sub);}
.grid{display:grid;gap:16px;}
.card{background:var(--card);border-radius:20px;padding:18px;box-shadow:0 2px 8px var(--border);}
.card h3{margin:0 0 12px;font-size:1.05rem;border-bottom:1px solid var(--border);padding-bottom:8px;}
.info-list{list-style:none;padding:0;margin:0;}
.info-item{padding:12px 0;border-bottom:1px dashed var(--border);}
.info-item:last-child{border-bottom:none;}
.info-label{display:block;font-size:0.75rem;color:var(--sub);margin-bottom:4px;font-weight:500;}
a{color:var(--accent);text-decoration:none;font-weight:500;}
.btn-link{display:inline-block;background:var(--btn-link-bg);color:var(--btn-link-text);padding:4px 10px;border-radius:8px;font-size:0.85rem;margin-right:5px;margin-bottom:5px;}
.footer{margin-top:40px;}
footer{text-align:center;margin:60px 0 30px;font-size:0.8rem;color:var(--sub);border-top:1px solid var(--border);padding-top:20px;}

.calc-form{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;}
.calc-group{display:flex;flex-direction:column;}
.calc-group label{font-size:0.7rem;color:var(--sub);margin-bottom:4px;}
.calc-group input{padding:8px;border-radius:8px;border:none;background:var(--input-bg);color:var(--text);}
.calc-btn{grid-column:span 2;margin-top:10px;padding:12px;background:var(--primary);color:white;border:none;border-radius:10px;font-weight:600;cursor:pointer;}

#propertyList{width:100%;border-collapse:collapse;margin-top:15px;}
#propertyList th,#propertyList td{border:1px solid var(--border);padding:6px;text-align:center;font-size:0.85rem;cursor:pointer;}
#propertyList th{background:var(--nav-bg);color:var(--nav-text);}
#propertyList td b{color:var(--primary);}
.btn-delete{cursor:pointer;color:red;}
.collapsible-content{display:block;transition:max-height 0.3s ease;overflow:hidden;}
.collapsed{max-height:0;padding:0;margin:0;border:none;}
</style>
</head>
<body>

<header>
  <h1>åŒ—å¡æˆ¿äº§æŠ•èµ„åˆ†æå·¥å…·</h1>
  <p>å¤šæˆ¿æºå¯¹æ¯” & æŠ•èµ„ ROI è®¡ç®—</p>
</header>

<div class="container">

  <!-- æŠ˜å ä¿¡æ¯å— -->
  <div class="section-title" id="toggleInfo">ğŸ˜ï¸ æˆ¿äº§æŠ•èµ„ (Real Estate) <span>ç‚¹å‡»å±•å¼€/æ”¶èµ·</span></div>
  <div class="grid collapsible-content" id="infoContent">
    <div class="card item" data-category="realestate">
      <h3>åŒºåŸŸä¸ç¯å¢ƒ</h3>
      <div class="info-list">
        <div class="info-item">
          <strong>çƒ­é—¨åŒºåŸŸ:</strong> Ballantyne (å—è¾¹), Marvin & Weddington, South End (å…¬å¯“)ã€‚
        </div>
        <div class="info-item">
          <span class="info-label">ç¯å¢ƒç»´æŠ¤</span>
          <strong>é©±èšŠ:</strong> ä½¿ç”¨ BIFEN XTS (1oz/4gal), æ¯æœˆå–·ä¸€æ¬¡ã€‚<br>
          <strong>ä¹°æœ¨å¤´:</strong> <a href="https://www.facebook.com/MountainIslandWoodCo/">Mountain Island Wood Co</a> | 
          <a href="https://www.facebook.com/marketplace/item/522402829872732/">èƒ¡æ¡ƒæœ¨èµ„æº</a>
        </div>
      </div>
    </div>

    <div class="card item" data-category="realestate">
      <h3>ç§Ÿå®¢è°ƒæŸ¥å·¥å…· (Tenant Screening)</h3>
      <div class="info-list">
        <div class="info-item">
          <span class="info-label">å®˜æ–¹è®°å½•æŸ¥è¯¢</span>
          <a href="https://portal-nc.tylertech.cloud/Portal/" class="btn-link">åŒ—å¡æ³•åº­è®°å½•</a>
          <a href="https://mecksheriffweb.mecklenburgcountync.gov" class="btn-link">å¤æ‘é€®æ•è®°å½•</a>
          <a href="https://mcsop.permitium.com/sop/searchpage" class="btn-link">å¤æ‘ Eviction è®°å½•</a>
        </div>
        <div class="info-item">
          <span class="info-label">èƒŒæ™¯è°ƒæŸ¥</span>
          <a href="https://www.fastpeoplesearch.com">FastPeopleSearch</a> | 
          <a href="https://www.mysmartmove.com/SmartMove/login/landlord_new_application.page">TransUnion</a> | 
          <a href="https://tenantbackgroundsearch.com">ç§Ÿå®¢è°ƒæŸ¥ç½‘</a>
        </div>
        <div class="info-item">
          <span class="info-label">é€‰æ°‘ä¸æˆ¿äº§æŸ¥è¯¢</span>
          <a href="https://vt.ncsbe.gov/RegLkup">åŒ—å¡é€‰æ°‘</a> | <a href="https://voterrecords.com/">å…¨ç¾é€‰æ°‘</a><br>
          <a href="https://property.spatialest.com/nc/mecklenburg#/">å¤æ‘ Deed</a> | 
          <a href="https://www.unionconcrod.org/">Union Deed</a> | 
          <a href="https://property.spatialest.com/nc/union#/">Union åœ°å€æŸ¥</a>
        </div>
      </div>
    </div>
  </div>

  <!-- æˆ¿æºåˆ†æå·¥å…· -->
  <div class="card">
    <h3>æ·»åŠ æˆ¿æº</h3>
    <div class="calc-form">
      <div class="calc-group"><label>æˆ¿æºåç§°</label><input type="text" id="propName" placeholder="ä¾‹ï¼šBallantyne Condo"></div>
      <div class="calc-group"><label>æˆ¿ä»·</label><input type="number" id="housePrice" value="450000"></div>
      <div class="calc-group"><label>é¦–ä»˜</label><input type="number" id="downpayment" value="90000"></div>
      <div class="calc-group"><label>å¹´ä¿é™©</label><input type="number" id="annualInsurance" value="1200"></div>
      <div class="calc-group"><label>å¹´æˆ¿äº§ç¨</label><input type="number" id="annualPropertyTax" value="4000"></div>
      <div class="calc-group"><label>è´·æ¬¾åˆ©ç‡(%)</label><input type="number" id="mortgageRate" value="7.55" step="0.01"></div>
      <div class="calc-group"><label>4å‘¨T-Billåˆ©ç‡(%)</label><input type="number" id="tbillRate" value="5.28" step="0.01"></div>
      <button class="calc-btn" id="addPropertyBtn">æ·»åŠ æˆ¿æº</button>
    </div>
  </div>

  <div class="card">
    <h3>æˆ¿æºå¯¹æ¯”è¡¨ï¼ˆç‚¹å‡»è¡¨å¤´æ’åºï¼‰</h3>
    <table id="propertyList">
      <thead>
        <tr>
          <th data-key="name">åç§°</th>
          <th data-key="monthlyMortgage">æœˆä¾›</th>
          <th data-key="monthlyTaxInsurance">ç¨+ä¿é™©</th>
          <th data-key="opportunityCost">é¦–ä»˜æœºä¼šæˆæœ¬</th>
          <th data-key="breakEvenRent">æœ€ä½å¹³è¡¡ç§Ÿé‡‘</th>
          <th data-key="cashOnCashROI">Cash-on-Cash ROI (%)</th>
          <th>æ“ä½œ</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

</div>

<footer>
  Â© 2026 åŒ—å¡æˆ¿äº§æŠ•èµ„æŒ‡å— | ä»…ä¾›å‚è€ƒ | bankofworld [at] gmail [dot] com
</footer>

<script>
// æŠ˜å é€»è¾‘
const toggleInfo = document.getElementById('toggleInfo');
const infoContent = document.getElementById('infoContent');
toggleInfo.addEventListener('click',()=>{
  infoContent.classList.toggle('collapsed');
});

// æŠ•èµ„å·¥å…·é€»è¾‘
const propName = document.getElementById('propName');
const housePriceInput = document.getElementById('housePrice');
const downpayment = document.getElementById('downpayment');
const annualInsurance = document.getElementById('annualInsurance');
const annualPropertyTax = document.getElementById('annualPropertyTax');
const mortgageRate = document.getElementById('mortgageRate');
const tbillRate = document.getElementById('tbillRate');
const addPropertyBtn = document.getElementById('addPropertyBtn');
const propertyListBody = document.querySelector('#propertyList tbody');
let properties = JSON.parse(localStorage.getItem('properties')||'[]');
let sortKey = null, sortAsc = true;

function calcProperty(p){
  const loan = p.housePrice - p.downpayment;
  const n = 30*12;
  const r = p.mortgageRate/100/12;
  const monthlyMortgage = loan*(r*Math.pow(1+r,n))/(Math.pow(1+r,n)-1);
  const monthlyTaxInsurance = (p.annualInsurance+p.annualPropertyTax)/12;
  const opportunityCost = p.downpayment*p.tbillRate/100/12;
  const breakEvenRent = monthlyMortgage + monthlyTaxInsurance + opportunityCost;
  const annualRent = breakEvenRent*12;
  const cashOnCashROI = ((annualRent - (monthlyMortgage+monthlyTaxInsurance)*12)/p.downpayment*100).toFixed(2);
  return {...p,monthlyMortgage,monthlyTaxInsurance,opportunityCost,breakEvenRent,cashOnCashROI};
}

function renderTable(){
  propertyListBody.innerHTML = '';
  if(sortKey){
    properties.sort((a,b)=>{
      const va = calcProperty(a)[sortKey];
      const vb = calcProperty(b)[sortKey];
      return sortAsc? va-vb : vb-va;
    });
  }
  let bestRent = Infinity, bestROI = -Infinity;
  properties.forEach(p=>{
    const c = calcProperty(p);
    if(c.breakEvenRent < bestRent) bestRent = c.breakEvenRent;
    if(+c.cashOnCashROI > bestROI) bestROI = +c.cashOnCashROI;
  });
  properties.forEach((p,index)=>{
    const c = calcProperty(p);
    const row = document.createElement('tr');
    row.style.background = '';
    if(c.breakEvenRent===bestRent) row.style.background= 'var(--highlight-rent)';
    if(+c.cashOnCashROI===bestROI) row.style.background= 'var(--highlight-roi)';
    row.innerHTML = `
      <td>${c.name}</td>
      <td>$${c.monthlyMortgage.toFixed(2)}</td>
      <td>$${c.monthlyTaxInsurance.toFixed(2)}</td>
      <td>$${c.opportunityCost.toFixed(2)}</td>
      <td>$${c.breakEvenRent.toFixed(2)}</td>
      <td>${c.cashOnCashROI}</td>
      <td><span class="btn-delete" data-index="${index}">åˆ é™¤</span></td>
    `;
    propertyListBody.appendChild(row);
  });
  localStorage.setItem('properties',JSON.stringify(properties));
}

addPropertyBtn.addEventListener('click',()=>{
  const newProp = {
    name:propName.value||'æœªå‘½åæˆ¿æº',
    housePrice:+housePriceInput.value,
    downpayment:+downpayment.value,
    annualInsurance:+annualInsurance.value,
    annualPropertyTax:+annualPropertyTax.value,
    mortgageRate:+mortgageRate.value,
    tbillRate:+tbillRate.value
  };
  properties.push(newProp);
  propName.value=''; housePriceInput.value=450000; downpayment.value=90000;
  renderTable();
});

propertyListBody.addEventListener('click',e=>{
  if(e.target.classList.contains('btn-delete')){
    const idx = e.target.dataset.index;
    properties.splice(idx,1);
    renderTable();
  }
});

document.querySelectorAll('#propertyList th[data-key]').forEach(th=>{
  th.addEventListener('click',()=>{
    const key = th.dataset.key;
    if(sortKey===key) sortAsc = !sortAsc;
    else {sortKey=key; sortAsc=true;}
    renderTable();
  });
});

renderTable();
</script>

</body>
</html>
